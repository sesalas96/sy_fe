{
  "info": {
    "name": "Safety Backend API",
    "description": "API collection for Safety contractor management system. Updated with complete role-based permission system supporting 9 roles: super_admin, safety_staff, client_supervisor, client_approver, client_staff, validadores_ops, contratista_admin, contratista_subalternos, contratista_huerfano. Includes comprehensive dashboard endpoints (16 total) with role-specific data, system health, revenue stats, risk assessments, incidents, inspections, contractors management, personal tasks, today stats, vehicle access, team management, projects, and invoices. Complete CRUD operations for users, teams, approvals, courses, security, reports, and analytics with role-specific data filtering and permissions.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "fileId",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "companyId",
      "value": "",
      "type": "string"
    },
    {
      "key": "contractorId",
      "value": "",
      "type": "string"
    },
    {
      "key": "workPermitId",
      "value": "",
      "type": "string"
    },
    {
      "key": "notificationId",
      "value": "",
      "type": "string"
    },
    {
      "key": "reviewId",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "sessionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "planId",
      "value": "",
      "type": "string"
    },
    {
      "key": "subscriptionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "invoiceId",
      "value": "",
      "type": "string"
    },
    {
      "key": "alertId",
      "value": "",
      "type": "string"
    },
    {
      "key": "teamId",
      "value": "",
      "type": "string"
    },
    {
      "key": "taskId",
      "value": "",
      "type": "string"
    },
    {
      "key": "memberId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "API Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check API health status"
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.token);",
                  "    pm.collectionVariables.set('userId', response.data._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"test\",\n    \"firstName\": \"Test\",\n    \"lastName\": \"User\",\n    \"role\": \"contratista_admin\",\n    \"companyId\": \"{{companyId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Register a new user. Roles: super_admin, safety_staff, client_supervisor, client_approver, client_staff, validadores_ops, contratista_admin, contratista_subalternos, contratista_huerfano"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.token);",
                  "    pm.collectionVariables.set('userId', response.data._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"test\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "Login with email and password"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            },
            "description": "Get current authenticated user information"
          }
        }
      ]
    },
    {
      "name": "Secure Authentication",
      "item": [
        {
          "name": "Secure Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.data.tokens.refreshToken);",
                  "    pm.collectionVariables.set('sessionId', response.data.sessionId);",
                  "    pm.collectionVariables.set('userId', response.data.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"secure.test@example.com\",\n    \"password\": \"SecurePass123!@#\",\n    \"firstName\": \"Secure\",\n    \"lastName\": \"User\",\n    \"role\": \"contratista_admin\",\n    \"companyId\": \"{{companyId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "register"
              ]
            },
            "description": "Secure user registration with enhanced validation and JWT key rotation"
          }
        },
        {
          "name": "Secure Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.data.tokens.refreshToken);",
                  "    pm.collectionVariables.set('sessionId', response.data.sessionId);",
                  "    pm.collectionVariables.set('userId', response.data.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"secure.test@example.com\",\n    \"password\": \"SecurePass123!@#\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "login"
              ]
            },
            "description": "Secure login with rate limiting and security audit logging"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.data.tokens.refreshToken);",
                  "    pm.collectionVariables.set('sessionId', response.data.sessionId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/refresh-token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "refresh-token"
              ]
            },
            "description": "Refresh access token using refresh token with automatic rotation"
          }
        },
        {
          "name": "Validate Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"token\": \"{{authToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/validate-token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "validate-token"
              ]
            },
            "description": "Validate token integrity and get payload information"
          }
        },
        {
          "name": "Get Current User (Secure)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "me"
              ]
            },
            "description": "Get current user information using secure authentication"
          }
        },
        {
          "name": "Secure Logout",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "logout"
              ]
            },
            "description": "Secure logout with token blacklisting and audit logging"
          }
        },
        {
          "name": "Logout All Devices",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/logout-all",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "logout-all"
              ]
            },
            "description": "Revoke all user sessions across all devices (strict rate limited)"
          }
        },
        {
          "name": "Get Token Statistics (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/token-stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "token-stats"
              ]
            },
            "description": "Get token and security statistics (Safety Personnel only)"
          }
        },
        {
          "name": "Revoke User Tokens (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"{{userId}}\",\n    \"reason\": \"admin_action\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/revoke-user-tokens",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "revoke-user-tokens"
              ]
            },
            "description": "Revoke all tokens for a specific user (Safety Personnel only)"
          }
        },
        {
          "name": "Test Rate Limiting - Auth",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"wrong@example.com\",\n    \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "login"
              ]
            },
            "description": "Test rate limiting - run this multiple times quickly to trigger rate limit (5 attempts per 15 minutes)"
          }
        },
        {
          "name": "Test Suspicious User Agent",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "User-Agent",
                "value": "curl/7.68.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"test\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/secure/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "secure",
                "login"
              ]
            },
            "description": "Test suspicious user agent detection (will be logged as security event)"
          }
        }
      ]
    },
    {
      "name": "File Management",
      "item": [
        {
          "name": "Upload File",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('fileId', response.data._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/your/file.pdf",
                  "description": "File to upload (PDF, images, etc.)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/files/upload",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "files",
                "upload"
              ]
            },
            "description": "Upload a file (document, image, etc.)"
          }
        },
        {
          "name": "Get File Info",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/files/{{fileId}}/info",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "files",
                "{{fileId}}",
                "info"
              ]
            },
            "description": "Get metadata information about a specific file"
          }
        },
        {
          "name": "Download File",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/files/{{fileId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "files",
                "{{fileId}}"
              ]
            },
            "description": "Download a file by its ID"
          }
        },
        {
          "name": "Delete File",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/files/{{fileId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "files",
                "{{fileId}}"
              ]
            },
            "description": "Delete a file from the system"
          }
        },
        {
          "name": "List Files",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/files?page=1&limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "files"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of items per page"
                }
              ]
            },
            "description": "List files with pagination support"
          }
        }
      ]
    },
    {
      "name": "Companies (Future)",
      "item": [
        {
          "name": "Create Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Company Name\",\n    \"ruc\": \"123456789\",\n    \"address\": \"Company Address\",\n    \"phone\": \"+506 1234-5678\",\n    \"email\": \"company@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies"
              ]
            },
            "description": "Create a new company (TO BE IMPLEMENTED)"
          }
        },
        {
          "name": "List Companies",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies"
              ]
            },
            "description": "List all companies (TO BE IMPLEMENTED)"
          }
        },
        {
          "name": "Get Company Dashboard",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/dashboard",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "dashboard"
              ]
            },
            "description": "Get comprehensive company dashboard with real statistics"
          }
        },
        {
          "name": "Update Company Settings",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"notificationDays\": [30, 15, 7, 1],\n    \"requiredCourses\": [\n        {\n            \"name\": \"Curso B\u00e1sico de Seguridad\",\n            \"isInitial\": true\n        },\n        {\n            \"name\": \"Primeros Auxilios\",\n            \"isInitial\": true\n        },\n        {\n            \"name\": \"Trabajo en Alturas\",\n            \"isInitial\": false\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/settings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "settings"
              ]
            },
            "description": "Update company notification and course settings"
          }
        },
        {
          "name": "Get Company Users",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/users?role=contratista_admin&isActive=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "users"
              ],
              "query": [
                {
                  "key": "role",
                  "value": "contratista_admin",
                  "description": "Filter by role",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "description": "Filter by active status",
                  "disabled": true
                }
              ]
            },
            "description": "Get all users belonging to a company"
          }
        },
        {
          "name": "Get Company Contractors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/contractors?status=activo&page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "contractors"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "activo",
                  "description": "Filter by contractor status"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Items per page"
                }
              ]
            },
            "description": "Get contractors for a specific company with pagination"
          }
        },
        {
          "name": "Get Company Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "stats"
              ]
            },
            "description": "Get detailed company statistics and trends"
          }
        },
        {
          "name": "Get Company Reports - Contractors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/reports?reportType=contractors&format=json",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "reports"
              ],
              "query": [
                {
                  "key": "reportType",
                  "value": "contractors",
                  "description": "Type of report (contractors, expiring-documents, courses, users)"
                },
                {
                  "key": "format",
                  "value": "json",
                  "description": "Output format (json or csv)"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01T00:00:00.000Z",
                  "description": "Start date for filtering",
                  "disabled": true
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31T23:59:59.999Z",
                  "description": "End date for filtering",
                  "disabled": true
                }
              ]
            },
            "description": "Generate contractors report"
          }
        },
        {
          "name": "Get Company Reports - Expiring Documents",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{companyId}}/reports?reportType=expiring-documents&format=json",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "{{companyId}}",
                "reports"
              ],
              "query": [
                {
                  "key": "reportType",
                  "value": "expiring-documents",
                  "description": "Documents expiring in next 30 days"
                },
                {
                  "key": "format",
                  "value": "json",
                  "description": "Output format"
                }
              ]
            },
            "description": "Generate expiring documents report"
          }
        },
        {
          "name": "Bulk Update Companies",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"companyIds\": [\"{{companyId}}\"],\n    \"operation\": \"activate\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies/bulk-update",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "companies",
                "bulk-update"
              ]
            },
            "description": "Bulk operations on multiple companies (activate, deactivate, updateSettings)"
          }
        }
      ]
    },
    {
      "name": "Contractors",
      "item": [
        {
          "name": "Create Contractor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('contractorId', response.data._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"fullName\": \"Juan P\u00e9rez\",\n    \"cedula\": \"123456789\",\n    \"companyId\": \"{{companyId}}\",\n    \"ordenPatronal\": {\n        \"number\": \"OP-2024-001\",\n        \"expiryDate\": \"2025-12-31T00:00:00.000Z\"\n    },\n    \"polizaINS\": {\n        \"number\": \"INS-2024-001\",\n        \"expiryDate\": \"2025-06-30T00:00:00.000Z\"\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors"
              ]
            },
            "description": "Create a new contractor profile"
          }
        },
        {
          "name": "List Contractors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/contractors?page=1&limit=10&status=activo",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "companyId",
                  "value": "{{companyId}}",
                  "description": "Filter by company",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "activo",
                  "description": "Filter by status (activo/inactivo/baja)"
                },
                {
                  "key": "search",
                  "value": "Juan",
                  "description": "Search by name, cedula, or poliza",
                  "disabled": true
                },
                {
                  "key": "expiringDocs",
                  "value": "true",
                  "description": "Show only contractors with expiring documents",
                  "disabled": true
                }
              ]
            },
            "description": "List contractors with filters and pagination"
          }
        },
        {
          "name": "Get Contractor Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}"
              ]
            },
            "description": "Get contractor profile with documents, courses and expiring items"
          }
        },
        {
          "name": "Update Contractor",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"fullName\": \"Juan P\u00e9rez Updated\",\n    \"status\": \"activo\",\n    \"polizaINS\": {\n        \"number\": \"INS-2024-002\",\n        \"expiryDate\": \"2025-12-31T00:00:00.000Z\"\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}"
              ]
            },
            "description": "Update contractor information"
          }
        },
        {
          "name": "Deactivate Contractor",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Contract terminated\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}"
              ]
            },
            "description": "Deactivate a contractor"
          }
        },
        {
          "name": "Get Contractor Documents",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/documents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "documents"
              ]
            },
            "description": "Get contractor documents with status"
          }
        },
        {
          "name": "Update Contractor Document",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"documentType\": \"polizaINS\",\n    \"number\": \"INS-2024-NEW\",\n    \"expiryDate\": \"2025-12-31T00:00:00.000Z\",\n    \"documentUrl\": \"https://example.com/document.pdf\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/documents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "documents"
              ]
            },
            "description": "Update contractor documents (polizaINS or ordenPatronal)"
          }
        },
        {
          "name": "Get Contractor Courses",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses"
              ]
            },
            "description": "Get contractor courses with summary"
          }
        },
        {
          "name": "Add Course to Contractor",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"courseType\": \"initial\",\n    \"name\": \"Curso B\u00e1sico de Seguridad\",\n    \"completionDate\": \"2024-01-15T00:00:00.000Z\",\n    \"certificateUrl\": \"https://example.com/certificate.pdf\",\n    \"talentLMSCourseId\": \"course_123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses"
              ]
            },
            "description": "Add initial or additional course to contractor"
          }
        },
        {
          "name": "Add Additional Course (with expiry)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"courseType\": \"additional\",\n    \"name\": \"Curso Trabajo en Alturas\",\n    \"completionDate\": \"2024-02-15T00:00:00.000Z\",\n    \"expiryDate\": \"2025-02-15T00:00:00.000Z\",\n    \"certificateUrl\": \"https://example.com/certificate2.pdf\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses"
              ]
            },
            "description": "Add additional course with expiration date"
          }
        },
        {
          "name": "Update Course",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"courseType\": \"additional\",\n    \"name\": \"Curso Trabajo en Alturas - Actualizado\",\n    \"expiryDate\": \"2025-12-31T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses/{{courseId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses",
                "{{courseId}}"
              ]
            },
            "description": "Update existing course information"
          }
        },
        {
          "name": "Delete Course",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"courseType\": \"additional\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses/{{courseId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses",
                "{{courseId}}"
              ]
            },
            "description": "Delete a course from contractor profile"
          }
        }
      ]
    },
    {
      "name": "Work Permits",
      "item": [
        {
          "name": "Create Work Permit",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('workPermitId', response.data._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"contractorId\": \"{{contractorId}}\",\n    \"workDescription\": \"Mantenimiento el\u00e9ctrico en panel principal. Revisi\u00f3n de conexiones y cambio de breakers defectuosos.\",\n    \"location\": \"Edificio A, Piso 3, Sala de Equipos\",\n    \"startDate\": \"2024-12-20T08:00:00.000Z\",\n    \"endDate\": \"2024-12-20T17:00:00.000Z\",\n    \"workHours\": {\n        \"start\": \"08:00\",\n        \"end\": \"17:00\"\n    },\n    \"identifiedRisks\": [\n        \"Riesgo el\u00e9ctrico - electrocuci\u00f3n\",\n        \"Trabajo en altura\",\n        \"Espacios confinados\",\n        \"Contacto con partes energizadas\"\n    ],\n    \"toolsToUse\": [\n        \"Mult\u00edmetro digital\",\n        \"Herramientas aisladas\",\n        \"Detector de voltaje\",\n        \"Escalera diel\u00e9ctrica\"\n    ],\n    \"requiredPPE\": [\n        \"Casco diel\u00e9ctrico\",\n        \"Guantes aislantes\",\n        \"Gafas de seguridad\",\n        \"Zapatos diel\u00e9ctricos\",\n        \"Ropa ign\u00edfuga\"\n    ],\n    \"safetyControls\": [\n        {\n            \"item\": \"Aplicar lock out / tag out\",\n            \"checked\": true,\n            \"notes\": \"Panel principal bloqueado y etiquetado\"\n        },\n        {\n            \"item\": \"Verificar ausencia de voltaje\",\n            \"checked\": true,\n            \"notes\": \"Medici\u00f3n con mult\u00edmetro confirmada\"\n        },\n        {\n            \"item\": \"Delimitar \u00e1rea de trabajo\",\n            \"checked\": true,\n            \"notes\": \"Conos y cinta de seguridad instalados\"\n        },\n        {\n            \"item\": \"Extintor disponible en sitio\",\n            \"checked\": true\n        }\n    ],\n    \"additionalControls\": \"Coordinaci\u00f3n con departamento de facilities para corte de energ\u00eda. Comunicaci\u00f3n por radio cada 30 minutos.\",\n    \"requiredApprovals\": [\n        { \"department\": \"supervisor\", \"requiredRole\": \"client_supervisor\" },\n        { \"department\": \"hse\", \"requiredRole\": \"client_approver\" },\n        { \"department\": \"seguridad\", \"requiredRole\": \"validadores_ops\" }\n    ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits"
              ]
            },
            "description": "Create a new work permit with all required safety information"
          }
        },
        {
          "name": "List Work Permits",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/work-permits?page=1&limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "status",
                  "value": "pendiente",
                  "description": "Filter by status",
                  "disabled": true
                },
                {
                  "key": "contractorId",
                  "value": "{{contractorId}}",
                  "description": "Filter by contractor",
                  "disabled": true
                },
                {
                  "key": "department",
                  "value": "supervisor",
                  "description": "Filter by approval department (supervisor, hse, seguridad, facilities)",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "el\u00e9ctrico",
                  "description": "Search in description/location",
                  "disabled": true
                }
              ]
            },
            "description": "List work permits with filtering and pagination"
          }
        },
        {
          "name": "Get Work Permit Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/stats?companyId={{companyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "stats"
              ],
              "query": [
                {
                  "key": "companyId",
                  "value": "{{companyId}}",
                  "description": "Filter by company",
                  "disabled": true
                }
              ]
            },
            "description": "Get work permit statistics by status and department. Note: Users need appropriate roles (client_supervisor, client_approver, validadores_ops, safety_staff, super_admin) to approve permits."
          }
        },
        {
          "name": "Get Work Permit Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}"
              ]
            },
            "description": "Get detailed work permit information with approval progress"
          }
        },
        {
          "name": "Update Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"workDescription\": \"Mantenimiento el\u00e9ctrico actualizado - incluye revisi\u00f3n de sistema de respaldo\",\n    \"additionalControls\": \"Verificaci\u00f3n adicional del sistema UPS antes de iniciar trabajos\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}"
              ]
            },
            "description": "Update work permit (only allowed in draft or rejected status)"
          }
        },
        {
          "name": "Sign Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}/sign",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}",
                "sign"
              ]
            },
            "description": "Contractor signs the work permit and submits for approval"
          }
        },
        {
          "name": "Approve Work Permit - Supervisor",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"action\": \"approve\",\n    \"department\": \"supervisor\",\n    \"comments\": \"Aprobado por supervisor. Se verificaron todos los controles de seguridad.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}",
                "approve"
              ]
            },
            "description": "Supervisor approves the work permit"
          }
        },
        {
          "name": "Approve Work Permit - HSE",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"action\": \"approve\",\n    \"department\": \"hse\",\n    \"comments\": \"Aprobado por HSE. Cumple con todas las normas de seguridad.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}",
                "approve"
              ]
            },
            "description": "HSE department approves the work permit. User must have client_approver role or be super_admin/safety_staff."
          }
        },
        {
          "name": "Approve Work Permit - Security",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"action\": \"approve\",\n    \"department\": \"seguridad\",\n    \"comments\": \"Aprobado por seguridad. Acceso autorizado al \u00e1rea restringida.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}",
                "approve"
              ]
            },
            "description": "Security department approves the work permit. User must have validadores_ops role or be super_admin/safety_staff."
          }
        },
        {
          "name": "Reject Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"action\": \"reject\",\n    \"department\": \"hse\",\n    \"comments\": \"Rechazado - Falta especificar procedimiento de emergencia y equipo de rescate.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}",
                "approve"
              ]
            },
            "description": "Reject work permit with comments"
          }
        },
        {
          "name": "Cancel Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Trabajo pospuesto debido a condiciones clim\u00e1ticas adversas\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/work-permits/{{workPermitId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "work-permits",
                "{{workPermitId}}"
              ]
            },
            "description": "Cancel work permit with reason"
          }
        }
      ]
    },
    {
      "name": "Notifications (Future)",
      "item": [
        {
          "name": "Get User Notifications",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications?unread=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications"
              ],
              "query": [
                {
                  "key": "unread",
                  "value": "true",
                  "description": "Filter only unread notifications"
                }
              ]
            },
            "description": "Get user notifications (TO BE IMPLEMENTED)"
          }
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{{notificationId}}",
                "read"
              ]
            },
            "description": "Mark notification as read (TO BE IMPLEMENTED)"
          }
        }
      ]
    },
    {
      "name": "Courses (Future)",
      "item": [
        {
          "name": "Add Course to Contractor",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"courseName\": \"Basic Safety Training\",\n    \"completionDate\": \"2024-12-01\",\n    \"expirationDate\": \"2025-12-01\",\n    \"certificateFileId\": \"{{fileId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contractors/{{contractorId}}/courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "contractors",
                "{{contractorId}}",
                "courses"
              ]
            },
            "description": "Add a course to contractor profile (TO BE IMPLEMENTED)"
          }
        },
        {
          "name": "Sync with TalentLMS",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/sync-talentlms",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "sync-talentlms"
              ]
            },
            "description": "Sync courses with TalentLMS platform (TO BE IMPLEMENTED)"
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get My Notifications",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications?limit=20&skip=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of notifications to retrieve"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "description": "Number of notifications to skip"
                },
                {
                  "key": "isRead",
                  "value": "false",
                  "description": "Filter by read status",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "document_expiry",
                  "description": "Filter by notification type",
                  "disabled": true
                }
              ]
            },
            "description": "Get current user's notifications with pagination and filters"
          }
        },
        {
          "name": "Get Notification Stats",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "stats"
              ]
            },
            "description": "Get notification statistics for current user"
          }
        },
        {
          "name": "Get Notification by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{{notificationId}}"
              ]
            },
            "description": "Get specific notification by ID"
          }
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}/mark-read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{{notificationId}}",
                "mark-read"
              ]
            },
            "description": "Mark specific notification as read"
          }
        },
        {
          "name": "Mark All Notifications as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/mark-all-read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "mark-all-read"
              ]
            },
            "description": "Mark all notifications as read for current user"
          }
        },
        {
          "name": "Delete Notification",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{{notificationId}}"
              ]
            },
            "description": "Delete specific notification"
          }
        },
        {
          "name": "Bulk Delete Notifications",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notificationIds\": [\n    \"{{notificationId}}\",\n    \"673e5d1234567890abcdef12\"\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notifications/bulk-delete",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "bulk-delete"
              ]
            },
            "description": "Bulk delete multiple notifications"
          }
        },
        {
          "name": "Create Notification (Safety Personnel)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recipientId\": \"{{userId}}\",\n  \"type\": \"system\",\n  \"title\": \"Test Notification\",\n  \"message\": \"This is a test notification message\",\n  \"priority\": \"medium\",\n  \"sendEmail\": true,\n  \"actionUrl\": \"/dashboard\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notifications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications"
              ]
            },
            "description": "Create a new notification (Safety personnel only)"
          }
        },
        {
          "name": "Get Company Notifications (Safety Personnel)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/company/{{companyId}}?limit=20&skip=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "company",
                "{{companyId}}"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of notifications to retrieve"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "description": "Number of notifications to skip"
                },
                {
                  "key": "type",
                  "value": "document_expiry",
                  "description": "Filter by notification type",
                  "disabled": true
                },
                {
                  "key": "priority",
                  "value": "high",
                  "description": "Filter by priority",
                  "disabled": true
                },
                {
                  "key": "isRead",
                  "value": "false",
                  "description": "Filter by read status",
                  "disabled": true
                }
              ]
            },
            "description": "Get notifications for a specific company (Safety personnel only)"
          }
        },
        {
          "name": "Run Expiration Check (Safety Personnel)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/run-expiration-check",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "run-expiration-check"
              ]
            },
            "description": "Manually trigger document expiration check (Safety personnel only)"
          }
        },
        {
          "name": "Resend Email Notification (Safety Personnel)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}/resend-email",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{{notificationId}}",
                "resend-email"
              ]
            },
            "description": "Resend email notification (Safety personnel only)"
          }
        }
      ]
    },
    {
      "name": "Reports (Future)",
      "item": [
        {
          "name": "Export Contractors Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/contractors?format=excel&companyId={{companyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "contractors"
              ],
              "query": [
                {
                  "key": "format",
                  "value": "excel",
                  "description": "Export format (excel/pdf)"
                },
                {
                  "key": "companyId",
                  "value": "{{companyId}}"
                }
              ]
            },
            "description": "Export contractors report (TO BE IMPLEMENTED)"
          }
        },
        {
          "name": "Export Expiration Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/expirations?daysAhead=30",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "expirations"
              ],
              "query": [
                {
                  "key": "daysAhead",
                  "value": "30",
                  "description": "Days ahead to check for expirations"
                }
              ]
            },
            "description": "Export document expiration report (TO BE IMPLEMENTED)"
          }
        }
      ]
    },
    {
      "name": "Reviews",
      "item": [
        {
          "name": "Create Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('reviewId', response.review._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"contractorId\": \"{{contractorId}}\",\n    \"workPermitId\": \"{{workPermitId}}\",\n    \"punctuality\": 5,\n    \"quality\": 4,\n    \"safety\": 5,\n    \"communication\": 5,\n    \"professionalBehavior\": 5,\n    \"comment\": \"Excelente trabajo del contratista. Cumpli\u00f3 con todos los protocolos de seguridad, fue puntual y realiz\u00f3 un trabajo de alta calidad. Muy profesional en su comunicaci\u00f3n con el equipo.\",\n    \"projectName\": \"Mantenimiento El\u00e9ctrico Edificio A\",\n    \"workType\": \"Mantenimiento El\u00e9ctrico\",\n    \"startDate\": \"2024-12-10T08:00:00.000Z\",\n    \"endDate\": \"2024-12-15T17:00:00.000Z\",\n    \"wouldHireAgain\": true,\n    \"tags\": [\"el\u00e9ctrico\", \"mantenimiento\", \"profesional\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/reviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews"
              ]
            },
            "description": "Create a new review for a contractor. All rating fields must be between 1 and 5."
          }
        },
        {
          "name": "Get Contractor Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reviews/contractor/{{contractorId}}?page=1&limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "contractor",
                "{{contractorId}}"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (max 100)"
                }
              ]
            },
            "description": "Get all reviews for a specific contractor with statistics"
          }
        },
        {
          "name": "Get Company Reviews",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reviews/company?page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "company"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Items per page"
                }
              ]
            },
            "description": "Get all reviews from your company"
          }
        },
        {
          "name": "Get Review by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reviews/{{reviewId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "{{reviewId}}"
              ]
            },
            "description": "Get detailed information about a specific review"
          }
        },
        {
          "name": "Update Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"quality\": 5,\n    \"comment\": \"Actualizando mi rese\u00f1a. El trabajo fue a\u00fan mejor de lo esperado despu\u00e9s de ver los resultados a largo plazo.\",\n    \"tags\": [\"el\u00e9ctrico\", \"mantenimiento\", \"excelente\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/reviews/{{reviewId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "{{reviewId}}"
              ]
            },
            "description": "Update an existing review (only the reviewer can update)"
          }
        },
        {
          "name": "Delete Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reviews/{{reviewId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "{{reviewId}}"
              ]
            },
            "description": "Delete a review. Owners can delete completely, admins/safety staff can hide it."
          }
        },
        {
          "name": "Flag Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Esta rese\u00f1a contiene informaci\u00f3n falsa sobre el trabajo realizado.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/reviews/{{reviewId}}/flag",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews",
                "{{reviewId}}",
                "flag"
              ]
            },
            "description": "Flag a review for moderation"
          }
        },
        {
          "name": "Create Review - Negative Example",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"contractorId\": \"{{contractorId}}\",\n    \"punctuality\": 2,\n    \"quality\": 2,\n    \"safety\": 1,\n    \"communication\": 2,\n    \"professionalBehavior\": 2,\n    \"comment\": \"El contratista lleg\u00f3 tarde, no sigui\u00f3 los protocolos de seguridad acordados y el trabajo tuvo que ser corregido m\u00faltiples veces.\",\n    \"projectName\": \"Reparaci\u00f3n Sistema HVAC\",\n    \"workType\": \"HVAC\",\n    \"startDate\": \"2024-11-01T08:00:00.000Z\",\n    \"endDate\": \"2024-11-05T17:00:00.000Z\",\n    \"wouldHireAgain\": false,\n    \"tags\": [\"hvac\", \"problemas\", \"seguridad\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/reviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reviews"
              ]
            },
            "description": "Example of a negative review that will trigger supervisor notification"
          }
        }
      ]
    },
    {
      "name": "Plans & Pricing",
      "item": [
        {
          "name": "Get All Plans",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/plans?active=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans"
              ],
              "query": [
                {
                  "key": "active",
                  "value": "true",
                  "description": "Filter by active plans only"
                }
              ]
            },
            "description": "Get all available plans for subscription"
          }
        },
        {
          "name": "Get Plan by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/plans/{{planId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans",
                "{{planId}}"
              ]
            },
            "description": "Get specific plan details by ID"
          }
        },
        {
          "name": "Compare Plans",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/plans/compare?planIds={{planId}},64f7a3b2c1d4e5f6a7b8c9d0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans",
                "compare"
              ],
              "query": [
                {
                  "key": "planIds",
                  "value": "{{planId}},64f7a3b2c1d4e5f6a7b8c9d0",
                  "description": "Comma-separated plan IDs to compare"
                }
              ]
            },
            "description": "Compare features and pricing between multiple plans"
          }
        },
        {
          "name": "Create Plan (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Premium Plan\",\n    \"code\": \"PREMIUM\",\n    \"description\": \"Plan premium con todas las funcionalidades\",\n    \"monthlyPrice\": 299,\n    \"yearlyPrice\": 2990,\n    \"currency\": \"USD\",\n    \"trialDays\": 14,\n    \"isPopular\": true,\n    \"sortOrder\": 3,\n    \"features\": {\n        \"maxUsers\": 100,\n        \"maxContractors\": 500,\n        \"maxWorkPermitsPerMonth\": 1000,\n        \"maxStorageGB\": 100,\n        \"maxNotificationsPerMonth\": 5000,\n        \"maxReviewsPerMonth\": 200,\n        \"hasAdvancedReports\": true,\n        \"hasAPIAccess\": true,\n        \"hasSSO\": true,\n        \"hasCustomBranding\": true,\n        \"hasPrioritySupport\": true,\n        \"hasAuditLogs\": true,\n        \"hasDataExport\": true,\n        \"hasCustomFields\": true,\n        \"hasAutomatedNotifications\": true,\n        \"hasMultiCompanySupport\": true,\n        \"hasAdvancedPermissions\": true,\n        \"hasComplianceReports\": true,\n        \"hasIntegrations\": true,\n        \"hasMobileApp\": true,\n        \"hasRealTimeSync\": true,\n        \"hasBackupRestore\": true,\n        \"hasCustomWorkflows\": true,\n        \"hasAdvancedSecurity\": true,\n        \"hasDedicatedSupport\": true\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/plans",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans"
              ]
            },
            "description": "Create a new plan (Safety personnel only)"
          }
        },
        {
          "name": "Update Plan (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"monthlyPrice\": 199,\n    \"yearlyPrice\": 1990,\n    \"description\": \"Plan profesional actualizado con nuevas funcionalidades\",\n    \"features\": {\n        \"maxUsers\": 25,\n        \"maxContractors\": 100,\n        \"hasAdvancedReports\": true\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/plans/{{planId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans",
                "{{planId}}"
              ]
            },
            "description": "Update plan details (Safety personnel only)"
          }
        },
        {
          "name": "Deactivate Plan (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/plans/{{planId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans",
                "{{planId}}"
              ]
            },
            "description": "Deactivate a plan (Safety personnel only). Plans with active subscriptions cannot be deleted."
          }
        },
        {
          "name": "Initialize Default Plans (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/plans/initialize",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "plans",
                "initialize"
              ]
            },
            "description": "Initialize default plans (Basic, Professional, Enterprise). Only works if no plans exist."
          }
        }
      ]
    },
    {
      "name": "Subscriptions",
      "item": [
        {
          "name": "Create Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"companyId\": \"{{companyId}}\",\n    \"planId\": \"{{planId}}\",\n    \"billingCycle\": \"monthly\",\n    \"paymentInfo\": {\n        \"method\": \"credit_card\",\n        \"cardLast4\": \"1234\",\n        \"expiryMonth\": 12,\n        \"expiryYear\": 2025\n    },\n    \"discountPercentage\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions"
              ]
            },
            "description": "Create a new subscription for a company"
          }
        },
        {
          "name": "Get My Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/my",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "my"
              ]
            },
            "description": "Get current user's company subscription with trial and billing info"
          }
        },
        {
          "name": "Get Subscription by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "{{subscriptionId}}"
              ]
            },
            "description": "Get specific subscription details by ID"
          }
        },
        {
          "name": "Update Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"billingCycle\": \"yearly\",\n    \"autoRenew\": true,\n    \"customLimits\": {\n        \"maxUsers\": 50,\n        \"maxContractors\": 200\n    },\n    \"notes\": \"Cliente VIP con l\u00edmites personalizados\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "{{subscriptionId}}"
              ]
            },
            "description": "Update subscription settings (billing cycle, auto-renewal, custom limits)"
          }
        },
        {
          "name": "Upgrade Plan",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"newPlanId\": \"64f7a3b2c1d4e5f6a7b8c9d0\",\n    \"immediate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}/upgrade",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "{{subscriptionId}}",
                "upgrade"
              ]
            },
            "description": "Upgrade subscription to a higher-tier plan. Set immediate=true for instant upgrade."
          }
        },
        {
          "name": "Cancel Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"No longer need the service\",\n    \"immediate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "{{subscriptionId}}",
                "cancel"
              ]
            },
            "description": "Cancel subscription. Set immediate=false to cancel at period end."
          }
        },
        {
          "name": "Get Usage Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions/usage",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions",
                "usage"
              ]
            },
            "description": "Get current usage statistics vs plan limits for your company"
          }
        },
        {
          "name": "List All Subscriptions (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/subscriptions?status=active&page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "subscriptions"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "active",
                  "description": "Filter by subscription status"
                },
                {
                  "key": "planId",
                  "value": "{{planId}}",
                  "description": "Filter by plan ID",
                  "disabled": true
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "List all subscriptions with filters (Safety personnel only)"
          }
        }
      ]
    },
    {
      "name": "Billing & Payments",
      "item": [
        {
          "name": "Initiate Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/billing/{{subscriptionId}}/pay",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "billing",
                "{{subscriptionId}}",
                "pay"
              ]
            },
            "description": "Initiate payment for subscription via Tilopay"
          }
        },
        {
          "name": "Retry Failed Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/billing/{{subscriptionId}}/retry",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "billing",
                "{{subscriptionId}}",
                "retry"
              ]
            },
            "description": "Retry payment for past_due subscription"
          }
        },
        {
          "name": "Get Invoices",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/billing/invoices",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "billing",
                "invoices"
              ]
            },
            "description": "Get all invoices for current user's company"
          }
        },
        {
          "name": "Download Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/billing/invoices/{{invoiceId}}/download",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "billing",
                "invoices",
                "{{invoiceId}}",
                "download"
              ]
            },
            "description": "Get download URL for specific invoice PDF"
          }
        },
        {
          "name": "Tilopay Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Tilopay-Signature",
                "value": "webhook_signature_here"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"approved\",\n    \"paymentId\": \"tilopay_payment_123\",\n    \"amount\": 149.00,\n    \"currency\": \"CRC\",\n    \"metadata\": {\n        \"subscriptionId\": \"{{subscriptionId}}\"\n    },\n    \"processedAt\": \"2024-11-15T10:30:00Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/billing/webhook/tilopay",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "billing",
                "webhook",
                "tilopay"
              ]
            },
            "description": "Webhook endpoint for Tilopay payment notifications (simulated)"
          }
        }
      ]
    },
    {
      "name": "Audit & Compliance",
      "item": [
        {
          "name": "Get Audit Logs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/logs?page=1&limit=50&startDate=2024-01-01&endDate=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "logs"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Number of results per page (max 100)"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date filter (YYYY-MM-DD)",
                  "disabled": true
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31",
                  "description": "End date filter (YYYY-MM-DD)",
                  "disabled": true
                },
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "Filter by specific user",
                  "disabled": true
                },
                {
                  "key": "resource",
                  "value": "contractor",
                  "description": "Filter by resource type (contractor, workpermit, user, etc.)",
                  "disabled": true
                },
                {
                  "key": "action",
                  "value": "create",
                  "description": "Filter by action (create, update, delete, approve, etc.)",
                  "disabled": true
                },
                {
                  "key": "severity",
                  "value": "high",
                  "description": "Filter by severity (low, medium, high, critical)",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "data_modification",
                  "description": "Filter by category",
                  "disabled": true
                },
                {
                  "key": "module",
                  "value": "contractors",
                  "description": "Filter by module",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "contractor,registration",
                  "description": "Filter by tags (comma-separated)",
                  "disabled": true
                }
              ]
            },
            "description": "Get audit logs with comprehensive filtering options (Safety Personnel & Client Final only)"
          }
        },
        {
          "name": "Export Audit Logs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/export?export=true&format=json&startDate=2024-01-01&endDate=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "export"
              ],
              "query": [
                {
                  "key": "export",
                  "value": "true",
                  "description": "Enable export mode"
                },
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format (json or csv)"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date for export"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31",
                  "description": "End date for export"
                },
                {
                  "key": "severity",
                  "value": "high",
                  "description": "Filter by severity",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "business_process",
                  "description": "Filter by category",
                  "disabled": true
                }
              ]
            },
            "description": "Export audit logs in JSON or CSV format (Safety Personnel only - Rate Limited)"
          }
        },
        {
          "name": "Get Audit Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/statistics?startDate=2024-01-01&endDate=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "statistics"
              ],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Statistics start date"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31",
                  "description": "Statistics end date"
                },
                {
                  "key": "companyId",
                  "value": "{{companyId}}",
                  "description": "Filter by company (Safety Personnel only)",
                  "disabled": true
                }
              ]
            },
            "description": "Get comprehensive audit statistics and analytics"
          }
        },
        {
          "name": "Get User Audit History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/user/{{userId}}?limit=100&skip=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "user",
                "{{userId}}"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "100",
                  "description": "Number of records to retrieve"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "description": "Number of records to skip"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date filter",
                  "disabled": true
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31",
                  "description": "End date filter",
                  "disabled": true
                }
              ]
            },
            "description": "Get audit history for a specific user (own history or Safety Personnel)"
          }
        },
        {
          "name": "Get Resource Audit History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/resource/contractor/{{contractorId}}?limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "resource",
                "contractor",
                "{{contractorId}}"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Number of records to retrieve"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "description": "Number of records to skip",
                  "disabled": true
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date filter",
                  "disabled": true
                }
              ]
            },
            "description": "Get audit history for a specific resource (contractor, workpermit, etc.)"
          }
        },
        {
          "name": "Get Company Audit History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/company/{{companyId}}?limit=100&category=business_process",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "company",
                "{{companyId}}"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "100",
                  "description": "Number of records to retrieve"
                },
                {
                  "key": "category",
                  "value": "business_process",
                  "description": "Filter by category",
                  "disabled": true
                },
                {
                  "key": "severity",
                  "value": "high",
                  "description": "Filter by severity",
                  "disabled": true
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date filter",
                  "disabled": true
                }
              ]
            },
            "description": "Get audit history for a specific company"
          }
        },
        {
          "name": "Get Security Events (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/security-events?hours=24",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "security-events"
              ],
              "query": [
                {
                  "key": "hours",
                  "value": "24",
                  "description": "Hours to look back for security events (default: 24)"
                }
              ]
            },
            "description": "Get critical security events and suspicious activities (Safety Personnel only - Strict Rate Limited)"
          }
        },
        {
          "name": "Generate Compliance Report (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/compliance-report?startDate=2024-01-01&endDate=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "compliance-report"
              ],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Report start date"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31",
                  "description": "Report end date"
                },
                {
                  "key": "companyId",
                  "value": "{{companyId}}",
                  "description": "Filter by specific company",
                  "disabled": true
                }
              ]
            },
            "description": "Generate comprehensive compliance report with metrics and analysis (Safety Personnel only - Strict Rate Limited)"
          }
        },
        {
          "name": "Audit Logs - Filter by Work Permits",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/logs?resource=workpermit&action=approve&severity=high&page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "logs"
              ],
              "query": [
                {
                  "key": "resource",
                  "value": "workpermit",
                  "description": "Filter work permit activities"
                },
                {
                  "key": "action",
                  "value": "approve",
                  "description": "Filter approval actions"
                },
                {
                  "key": "severity",
                  "value": "high",
                  "description": "High severity events"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Example: Filter audit logs for work permit approvals"
          }
        },
        {
          "name": "Audit Logs - Filter by Failed Operations",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "User-Agent",
                "value": "Safety-App-Postman/1.0"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/audit/logs?category=access_control&tags=unauthorized,error&severity=medium,high&page=1&limit=30",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "audit",
                "logs"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "access_control",
                  "description": "Access control violations"
                },
                {
                  "key": "tags",
                  "value": "unauthorized,error",
                  "description": "Tags for unauthorized access and errors"
                },
                {
                  "key": "severity",
                  "value": "medium,high",
                  "description": "Medium and high severity"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "30"
                }
              ]
            },
            "description": "Example: Filter for failed operations and access control violations"
          }
        }
      ]
    },
    {
      "name": "Dashboard",
      "description": "Dashboard endpoints with role-based data filtering",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "stats"
              ]
            },
            "description": "Get dashboard statistics based on user role and permissions. Returns different metrics based on user's data scope (all, security, company, team, own)"
          }
        },
        {
          "name": "Get Dashboard Activities",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/activities",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "activities"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of activities to return"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset"
                }
              ]
            },
            "description": "Get recent activities based on user role. Limited to activities the user has permission to see"
          }
        },
        {
          "name": "Get Dashboard Alerts",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/alerts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "alerts"
              ],
              "query": [
                {
                  "key": "type",
                  "value": "all",
                  "description": "Filter by alert type: all, expiring, pending, overdue"
                }
              ]
            },
            "description": "Get active alerts and notifications for expiring documents, pending approvals, etc."
          }
        },
        {
          "name": "Mark Alert as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/alerts/:id/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "alerts",
                ":id",
                "read"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "{{alertId}}",
                  "description": "Alert ID to mark as read"
                }
              ]
            },
            "description": "Mark a specific alert as read for the current user"
          }
        },
        {
          "name": "Get System Health (SUPER_ADMIN)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/system-health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "system-health"
              ]
            },
            "description": "Get detailed system health metrics including database status, memory usage, uptime, etc. (Administrador only)"
          }
        },
        {
          "name": "Get Revenue Stats (SUPER_ADMIN)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/revenue",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "revenue"
              ]
            },
            "description": "Get revenue statistics including total revenue, monthly revenue, subscription breakdown (Administrador only)"
          }
        },
        {
          "name": "Get API Usage Stats (SUPER_ADMIN)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/api-usage",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "api-usage"
              ]
            },
            "description": "Get API usage statistics including request counts, response times, top endpoints (Administrador only)"
          }
        },
        {
          "name": "Get Risk Assessments (SAFETY_STAFF)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/risk-assessments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "risk-assessments"
              ]
            },
            "description": "Get risk assessment summary with high/medium/low risk categorization and compliance rates (Safety Staff)"
          }
        },
        {
          "name": "Get Incidents (SAFETY_STAFF)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/incidents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "incidents"
              ]
            },
            "description": "Get incident reports with severity breakdown and recent incidents (Safety Staff)"
          }
        },
        {
          "name": "Get Inspections (SAFETY_STAFF)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/inspections",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "inspections"
              ]
            },
            "description": "Get scheduled inspections with status and upcoming inspections (Safety Staff)"
          }
        },
        {
          "name": "Get Contractors Dashboard",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/contractors?page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "contractors"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of contractors per page"
                },
                {
                  "key": "status",
                  "value": "",
                  "description": "Filter by contractor status",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name or cedula",
                  "disabled": true
                }
              ]
            },
            "description": "Get detailed contractor list with compliance scores, active permits, and document status (Client roles)"
          }
        },
        {
          "name": "Get My Courses (CLIENT_STAFF)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/my-courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "my-courses"
              ]
            },
            "description": "Get personal course progress with completion status and upcoming deadlines (Client Staff)"
          }
        },
        {
          "name": "Get My Tasks",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/my-tasks",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "my-tasks"
              ]
            },
            "description": "Get personal task list including work permits and training assignments"
          }
        },
        {
          "name": "Get Today Stats (VALIDADORES_OPS)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/today-stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "today-stats"
              ]
            },
            "description": "Get today's entrance/exit statistics and hourly breakdown (Security Validators)"
          }
        },
        {
          "name": "Get Vehicle Access (VALIDADORES_OPS)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/vehicle-access",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "vehicle-access"
              ]
            },
            "description": "Get vehicle access management data including parking spaces and recent activity (Security Validators)"
          }
        },
        {
          "name": "Get Team Dashboard (CONTRATISTA_ADMIN)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/team?page=1&limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "team"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of team members per page"
                }
              ]
            },
            "description": "Get detailed team member list with compliance scores and training status (Contractor Admin)"
          }
        },
        {
          "name": "Get Projects",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/projects",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "projects"
              ]
            },
            "description": "Get projects overview with status, progress, and milestones (Contractor roles)"
          }
        },
        {
          "name": "Get Invoices (CONTRATISTA_HUERFANO)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/invoices",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "dashboard",
                "invoices"
              ]
            },
            "description": "Get invoice management data with outstanding amounts and payment status (Independent Contractor)"
          }
        }
      ]
    },
    {
      "name": "Users",
      "description": "User management endpoints with role-based access",
      "item": [
        {
          "name": "Get Users",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ],
              "query": [
                {
                  "key": "role",
                  "value": "",
                  "description": "Filter by role"
                },
                {
                  "key": "company",
                  "value": "",
                  "description": "Filter by company (admin only)"
                },
                {
                  "key": "status",
                  "value": "",
                  "description": "Filter by status: active, inactive"
                }
              ]
            },
            "description": "Get users based on role permissions. Super admin sees all, others see based on company/team"
          }
        },
        {
          "name": "Create User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            },
            "description": "Create new user. Role determines who can create users",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"client_staff\",\n  \"company\": \"{{companyId}}\",\n  \"phone\": \"+506 8888-8888\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            },
            "description": "Get specific user details. Access based on role permissions"
          }
        },
        {
          "name": "Update User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            },
            "description": "Update user information. Users can update own profile, admins can update others",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"Name\",\n  \"phone\": \"+506 9999-9999\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Delete User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            },
            "description": "Delete user. Only super_admin and company admins can delete users"
          }
        },
        {
          "name": "Change User Role",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}/role",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}",
                "role"
              ]
            },
            "description": "Change user role. Only admins can change roles",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"client_supervisor\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Toggle User Status",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}",
                "status"
              ]
            },
            "description": "Activate or deactivate user. Admins only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"active\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        }
      ]
    },
    {
      "name": "Teams",
      "description": "Team management for contractor organizations",
      "item": [
        {
          "name": "Get Teams",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "active",
                  "description": "Filter by status: active, inactive"
                }
              ]
            },
            "description": "Get teams based on permissions. Contractor admins see their teams"
          }
        },
        {
          "name": "Create Team",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/teams",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams"
              ]
            },
            "description": "Create new contractor team. Only contratista_admin can create teams",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"supervisorId\": \"{{userId}}\",\n  \"teamName\": \"Equipo de Construcción A\",\n  \"description\": \"Equipo especializado en construcción de estructuras metálicas\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Team by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}"
              ]
            },
            "description": "Get team details including members"
          }
        },
        {
          "name": "Update Team",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}"
              ]
            },
            "description": "Update team information",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"teamName\": \"Equipo de Construcción Especializada\",\n  \"description\": \"Equipo especializado en construcción de altura y soldadura\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Delete Team",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}"
              ]
            },
            "description": "Delete team. Only team admin can delete"
          }
        },
        {
          "name": "Add Team Member",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/members",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "members"
              ]
            },
            "description": "Add member to team",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contractorId\": \"{{contractorId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Remove Team Member",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/members/{{memberId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "members",
                "{{memberId}}"
              ]
            },
            "description": "Remove member from team"
          }
        },
        {
          "name": "Get Team Tasks",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/tasks?status=pendiente&priority=alta&page=1&limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "tasks"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "pendiente",
                  "description": "Filter by status: pendiente, en_progreso, completada, cancelada"
                },
                {
                  "key": "priority",
                  "value": "alta",
                  "description": "Filter by priority: baja, media, alta, urgente"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of items per page (max 100)"
                }
              ]
            },
            "description": "Get tasks assigned to team with filters and pagination"
          }
        },
        {
          "name": "Assign Task to Team",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/tasks",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "tasks"
              ]
            },
            "description": "Assign new task to team",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Inspección de estructuras metálicas\",\n  \"description\": \"Realizar inspección completa de las estructuras metálicas en la zona A, verificando soldaduras, corrosión y estado general.\",\n  \"assignedTo\": \"{{userId}}\",\n  \"priority\": \"alta\",\n  \"dueDate\": \"2024-02-15T09:00:00.000Z\",\n  \"estimatedHours\": 4,\n  \"tags\": [\"inspección\", \"estructuras\", \"seguridad\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Team Members",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/members?status=activo",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "members"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "activo",
                  "description": "Filter by status: activo, inactivo, baja"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name or cedula",
                  "disabled": true
                }
              ]
            },
            "description": "Get team members with optional filters"
          }
        },
        {
          "name": "Update Team Member",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/members/{{memberId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "members",
                "{{memberId}}"
              ]
            },
            "description": "Update team member status or other properties",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"inactivo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Team Stats",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/teams/{{teamId}}/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "teams",
                "{{teamId}}",
                "stats"
              ]
            },
            "description": "Get comprehensive team statistics including members, tasks, documents, and performance metrics"
          }
        }
      ]
    },
    {
      "name": "Approvals",
      "description": "Work permit approval workflow endpoints",
      "item": [
        {
          "name": "Get Pending Approvals",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/approvals/pending",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "approvals",
                "pending"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "pending",
                  "description": "Filter by status"
                },
                {
                  "key": "priority",
                  "value": "",
                  "description": "Filter by priority: high, medium, low"
                }
              ]
            },
            "description": "Get work permits pending approval for current user's role"
          }
        },
        {
          "name": "Approve Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/approvals/work-permits/{{workPermitId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "approvals",
                "work-permits",
                "{{workPermitId}}",
                "approve"
              ]
            },
            "description": "Approve a work permit. User must have the required role for the department",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"comments\": \"Approved with safety conditions\",\n  \"conditions\": [\n    \"Use proper PPE\",\n    \"Maintain safety barriers\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Reject Work Permit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/approvals/work-permits/{{workPermitId}}/reject",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "approvals",
                "work-permits",
                "{{workPermitId}}",
                "reject"
              ]
            },
            "description": "Reject a work permit with reason",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Missing risk assessment documentation\",\n  \"comments\": \"Please complete section 3.2 of the risk assessment\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Approval History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/approvals/history",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "approvals",
                "history"
              ],
              "query": [
                {
                  "key": "startDate",
                  "value": "",
                  "description": "Filter from date (ISO 8601)"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "description": "Filter to date (ISO 8601)"
                }
              ]
            },
            "description": "Get history of approvals made by current user"
          }
        },
        {
          "name": "Delegate Approval",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/approvals/delegate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "approvals",
                "delegate"
              ]
            },
            "description": "Delegate approval authority to another user temporarily",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"delegateToUserId\": \"{{userId}}\",\n  \"startDate\": \"2024-01-15\",\n  \"endDate\": \"2024-01-22\",\n  \"reason\": \"Vacation coverage\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        }
      ]
    },
    {
      "name": "Courses",
      "description": "Course and certification management integrated with TalentLMS",
      "item": [
        {
          "name": "Get Available Courses",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "",
                  "description": "Filter by category: safety, technical, compliance"
                },
                {
                  "key": "isRequired",
                  "value": "",
                  "description": "Filter required courses: true/false"
                },
                {
                  "key": "isExpiring",
                  "value": "",
                  "description": "Show expiring certificates: true/false"
                }
              ]
            },
            "description": "Get courses available based on user role and company"
          }
        },
        {
          "name": "Get Course Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "{{courseId}}"
              ]
            },
            "description": "Get detailed information about a course"
          }
        },
        {
          "name": "Enroll in Course",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/enroll",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "{{courseId}}",
                "enroll"
              ]
            },
            "description": "Enroll current user or team member in a course",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"scheduledDate\": \"2024-02-01\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get My Certificates",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/certificates",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "certificates"
              ]
            },
            "description": "Get current user's certificates and their expiry status"
          }
        },
        {
          "name": "Get Contractor Certificates",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/certificates/contractor/{{contractorId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "certificates",
                "contractor",
                "{{contractorId}}"
              ]
            },
            "description": "Get certificates for a specific contractor (supervisors only)"
          }
        },
        {
          "name": "Renew Certificate",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/courses/certificates/{{certificateId}}/renew",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "certificates",
                "{{certificateId}}",
                "renew"
              ]
            },
            "description": "Start renewal process for expiring certificate",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"courseId\": \"{{courseId}}\",\n  \"scheduledDate\": \"2024-01-20\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Upload Course Certificate",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/courses/certificates/upload",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "certificates",
                "upload"
              ]
            },
            "description": "Upload external course certificate",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"courseName\": \"Advanced Safety Training\",\n  \"completionDate\": \"2024-01-10\",\n  \"expiryDate\": \"2025-01-10\",\n  \"certificateFileId\": \"{{fileId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Sync with TalentLMS",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/courses/sync",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "courses",
                "sync"
              ]
            },
            "description": "Sync courses and completions with TalentLMS (admin only)"
          }
        }
      ]
    },
    {
      "name": "Security",
      "description": "Security and access control endpoints",
      "item": [
        {
          "name": "Get Access Requests",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/security/access-requests",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "access-requests"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "pending",
                  "description": "Filter by status: pending, approved, denied"
                },
                {
                  "key": "facility",
                  "value": "",
                  "description": "Filter by facility"
                }
              ]
            },
            "description": "Get pending access requests for facilities"
          }
        },
        {
          "name": "Approve Access Request",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/security/access-requests/{{requestId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "access-requests",
                "{{requestId}}",
                "approve"
              ]
            },
            "description": "Approve facility access request",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"validFrom\": \"2024-01-15T08:00:00Z\",\n  \"validUntil\": \"2024-01-15T18:00:00Z\",\n  \"accessAreas\": [\n    \"Main Building\",\n    \"Warehouse\"\n  ],\n  \"restrictions\": [\n    \"No photography allowed\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Create Security Incident",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/security/incidents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "incidents"
              ]
            },
            "description": "Report a security incident",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"unauthorized_access\",\n  \"severity\": \"medium\",\n  \"location\": \"Gate B\",\n  \"description\": \"Contractor attempted to access restricted area\",\n  \"involvedPersons\": [\n    \"{{contractorId}}\"\n  ],\n  \"actionTaken\": \"Access denied, supervisor notified\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Security Incidents",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/security/incidents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "incidents"
              ],
              "query": [
                {
                  "key": "severity",
                  "value": "",
                  "description": "Filter by severity: low, medium, high, critical"
                },
                {
                  "key": "type",
                  "value": "",
                  "description": "Filter by type"
                },
                {
                  "key": "startDate",
                  "value": "",
                  "description": "Filter from date"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "description": "Filter to date"
                }
              ]
            },
            "description": "Get security incidents based on permissions"
          }
        },
        {
          "name": "Create Tool/Equipment Entry",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/security/tools/entry",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "tools",
                "entry"
              ]
            },
            "description": "Register tools/equipment entering facility",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contractorId\": \"{{contractorId}}\",\n  \"tools\": [\n    {\n      \"name\": \"Power Drill\",\n      \"serialNumber\": \"PD-12345\",\n      \"condition\": \"good\"\n    }\n  ],\n  \"purpose\": \"Electrical maintenance work\",\n  \"expectedReturnDate\": \"2024-01-15T17:00:00Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Create Tool/Equipment Exit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/security/tools/exit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "tools",
                "exit"
              ]
            },
            "description": "Register tools/equipment leaving facility",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"entryId\": \"{{entryId}}\",\n  \"exitTools\": [\n    {\n      \"serialNumber\": \"PD-12345\",\n      \"condition\": \"good\",\n      \"notes\": \"No issues\"\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get Security Rounds",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/security/rounds",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "rounds"
              ]
            },
            "description": "Get security patrol rounds and checks"
          }
        },
        {
          "name": "Create Security Round",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/security/rounds",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "security",
                "rounds"
              ]
            },
            "description": "Log security patrol round",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areas\": [\n    \"Perimeter\",\n    \"Main Building\",\n    \"Parking\"\n  ],\n  \"findings\": [\n    {\n      \"area\": \"Parking\",\n      \"issue\": \"Light out in section B\",\n      \"severity\": \"low\"\n    }\n  ],\n  \"allClear\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        }
      ]
    },
    {
      "name": "Reports",
      "description": "Reporting endpoints with role-based data access",
      "item": [
        {
          "name": "Get Available Reports",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports"
              ]
            },
            "description": "Get list of reports available based on user role"
          }
        },
        {
          "name": "Export Contractors Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/contractors/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "contractors",
                "export"
              ],
              "query": [
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format: json, csv"
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filter by company"
                },
                {
                  "key": "status",
                  "value": "",
                  "description": "Filter by status: active, inactive"
                }
              ]
            },
            "description": "Export contractors report"
          }
        },
        {
          "name": "Export Work Permits Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/work-permits/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "work-permits",
                "export"
              ],
              "query": [
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format: json, csv"
                },
                {
                  "key": "startDate",
                  "value": "",
                  "description": "Start date for report"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "description": "End date for report"
                },
                {
                  "key": "status",
                  "value": "",
                  "description": "Filter by status"
                }
              ]
            },
            "description": "Export work permits report"
          }
        },
        {
          "name": "Export Compliance Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/compliance/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "compliance",
                "export"
              ],
              "query": [
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format: json, csv"
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filter by company"
                }
              ]
            },
            "description": "Export compliance status report"
          }
        },
        {
          "name": "Export Expiring Documents Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/expiring-documents/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "expiring-documents",
                "export"
              ],
              "query": [
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format: json, csv"
                },
                {
                  "key": "daysAhead",
                  "value": "30",
                  "description": "Number of days to look ahead"
                }
              ]
            },
            "description": "Export report of expiring documents"
          }
        },
        {
          "name": "Get Monthly Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/monthly",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "monthly"
              ],
              "query": [
                {
                  "key": "year",
                  "value": "2024",
                  "description": "Year for report"
                },
                {
                  "key": "month",
                  "value": "1",
                  "description": "Month for report (1-12)"
                }
              ]
            },
            "description": "Get monthly summary report"
          }
        },
        {
          "name": "Get Compliance Report",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/compliance",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                "compliance"
              ],
              "query": [
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filter by company"
                },
                {
                  "key": "contractorId",
                  "value": "",
                  "description": "Filter by contractor"
                }
              ]
            },
            "description": "Get detailed compliance report"
          }
        }
      ]
    },
    {
      "name": "Analytics",
      "description": "Analytics and insights endpoints",
      "item": [
        {
          "name": "Get Dashboard Analytics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/dashboard",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "dashboard"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "30d",
                  "description": "Time period: 7d, 30d, 90d, 1y"
                }
              ]
            },
            "description": "Get analytics data for dashboards based on role"
          }
        },
        {
          "name": "Get Trends",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/trends",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "trends"
              ],
              "query": [
                {
                  "key": "metric",
                  "value": "permits",
                  "description": "Metric to analyze"
                },
                {
                  "key": "period",
                  "value": "90d",
                  "description": "Time period: 7d, 30d, 90d, 1y"
                }
              ]
            },
            "description": "Get trend analysis for specific metrics"
          }
        },
        {
          "name": "Get Compliance Analytics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/compliance",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "compliance"
              ]
            },
            "description": "Get compliance analytics (management roles only)"
          }
        }
      ]
    }
  ]
}